<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Contact Fahmid Nursery & Primary School. Send us a message or visit our campus.">
    <title>Contact Us - Fahmid Nursery & Primary School</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Skip to main content link -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Hamburger Menu (Mobile) -->
    <button class="hamburger" id="hamburger" aria-label="Toggle navigation menu" aria-expanded="false">
        <span class="line1"></span>
        <span class="line2"></span>
        <span class="line3"></span>
    </button>

    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar" aria-label="Main navigation">
        <div class="sidebar-header">
            <div class="logo-text">Fahmid School</div>
        </div>

        <div class="sidebar-content">
            <ul role="list">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="academics.html">Academics</a></li>
                <li><a href="admissions.html">Admissions</a></li>
                <li><a href="school-life.html">School Life</a></li>
                <li><a href="gallery.html">Gallery</a></li>
                <li><a href="news.html">News</a></li>
                <li><a href="contact.html" aria-current="page">Contact</a></li>
            </ul>
        </div>

        <div class="sidebar-footer">
            <div class="sidebar-login-prompt">
                <a href="login.html" class="btn" style="width: 100%; padding: 15px; border-radius: 30px; font-size: 1.1rem; display: block; text-align: center;">
                    Login / Register
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content" id="main-content">
        <article class="container">
            <header>
                <h1>Contact Us</h1>
                <p class="lead">We'd love to hear from you. Fill out the form below or visit us.</p>
            </header>

            <section aria-labelledby="contact-form-heading">
                <h2 id="contact-form-heading">Send Us a Message</h2>
                <form id="contact-form" action="https://formspree.io/f/your-email" method="POST" class="contact-form" novalidate>
                    <div class="form-group">
                        <label for="name">Your Name <span class="required">*</span></label>
                        <input type="text" id="name" name="name" required aria-required="true">
                        <span class="error-message" id="name-error">Please enter your name</span>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Your Email <span class="required">*</span></label>
                        <input type="email" id="email" name="email" required aria-required="true">
                        <span class="error-message" id="email-error">Please enter a valid email address</span>
                    </div>
                    
                    <div class="form-group">
                        <label for="message">Your Message <span class="required">*</span></label>
                        <textarea id="message" name="message" rows="6" required aria-required="true"></textarea>
                        <span class="error-message" id="message-error">Please enter your message</span>
                    </div>
                    
                    <button type="submit" class="btn" id="submit-btn">
                        <span class="btn-text">Send Message</span>
                        <span class="btn-loading" style="display:none;">Sending...</span>
                    </button>
                </form>
            </section>

            <section aria-labelledby="visit-heading">
                <h2 id="visit-heading">Visit Us</h2>
                <address>
                    <p><strong>Address:</strong> [Insert School Address Here]</p>
                    <p><strong>Phone:</strong> <a href="tel:+234">[Insert Phone]</a></p>
                    <p><strong>Email:</strong> <a href="mailto:info@fahmidschool.edu">info@fahmidschool.edu</a></p>
                </address>

                <div class="map-container">
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=..." 
                        width="100%" 
                        height="400" 
                        style="border:0;" 
                        allowfullscreen="" 
                        loading="lazy"
                        title="Fahmid School location map">
                    </iframe>
                </div>
            </section>
        </article>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2026 Fahmid Nursery and Primary School. All rights reserved.</p>
        </div>
    </footer>

    <!-- Toast Container -->
    <div id="toast-container" aria-live="polite" aria-atomic="true"></div>

    <script src="script.js"></script>
    <script>
        /**
         * Contact Form Validation and Submission
         */
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('contact-form');
            const nameInput = document.getElementById('name');
            const emailInput = document.getElementById('email');
            const messageInput = document.getElementById('message');
            const submitBtn = document.getElementById('submit-btn');

            /**
             * Validate email format
             * @param {string} email - Email address to validate
             * @returns {boolean} True if valid email format
             */
            function isValidEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }

            /**
             * Show validation error for a field
             * @param {HTMLElement} input - Input element
             * @param {HTMLElement} errorElement - Error message element
             */
            function showError(input, errorElement) {
                input.classList.add('error');
                input.classList.remove('success');
                errorElement.classList.add('visible');
                input.setAttribute('aria-invalid', 'true');
            }

            /**
             * Show validation success for a field
             * @param {HTMLElement} input - Input element
             * @param {HTMLElement} errorElement - Error message element
             */
            function showSuccess(input, errorElement) {
                input.classList.remove('error');
                input.classList.add('success');
                errorElement.classList.remove('visible');
                input.setAttribute('aria-invalid', 'false');
            }

            /**
             * Validate individual field
             * @param {HTMLElement} input - Input element to validate
             * @returns {boolean} True if field is valid
             */
            function validateField(input) {
                const errorElement = document.getElementById(`${input.id}-error`);
                const value = input.value.trim();

                if (!value) {
                    showError(input, errorElement);
                    return false;
                }

                if (input.type === 'email' && !isValidEmail(value)) {
                    showError(input, errorElement);
                    return false;
                }

                showSuccess(input, errorElement);
                return true;
            }

            // Real-time validation on blur
            nameInput.addEventListener('blur', () => validateField(nameInput));
            emailInput.addEventListener('blur', () => validateField(emailInput));
            messageInput.addEventListener('blur', () => validateField(messageInput));

            // Clear error on input
            [nameInput, emailInput, messageInput].forEach(input => {
                input.addEventListener('input', () => {
                    if (input.classList.contains('error')) {
                        const errorElement = document.getElementById(`${input.id}-error`);
                        input.classList.remove('error');
                        errorElement.classList.remove('visible');
                    }
                });
            });

            /**
             * Handle form submission
             * @param {Event} e - Submit event
             */
            form.addEventListener('submit', async function(e) {
                e.preventDefault();

                // Validate all fields
                const isNameValid = validateField(nameInput);
                const isEmailValid = validateField(emailInput);
                const isMessageValid = validateField(messageInput);

                if (!isNameValid || !isEmailValid || !isMessageValid) {
                    if (window.showToast) {
                        window.showToast('Please fill in all required fields correctly', 'warning');
                    }
                    // Focus first invalid field
                    if (!isNameValid) nameInput.focus();
                    else if (!isEmailValid) emailInput.focus();
                    else if (!isMessageValid) messageInput.focus();
                    return;
                }

                // Show loading state
                submitBtn.disabled = true;
                submitBtn.classList.add('loading');
                submitBtn.querySelector('.btn-text').style.display = 'none';
                submitBtn.querySelector('.btn-loading').style.display = 'inline';

                try {
                    // Submit form using Fetch API
                    const response = await fetch(form.action, {
                        method: 'POST',
                        body: new FormData(form),
                        headers: {
                            'Accept': 'application/json'
                        }
                    });

                    if (response.ok) {
                        // Success
                        if (window.showToast) {
                            window.showToast('Message sent successfully! We\'ll get back to you soon.', 'success');
                        } else {
                            alert('Message sent successfully!');
                        }
                        form.reset();
                        [nameInput, emailInput, messageInput].forEach(input => {
                            input.classList.remove('success');
                        });
                    } else {
                        throw new Error('Form submission failed');
                    }
                } catch (error) {
                    console.error('Form submission error:', error);
                    if (window.showToast) {
                        window.showToast('Failed to send message. Please try again or email us directly.', 'danger');
                    } else {
                        alert('Failed to send message. Please try again.');
                    }
                } finally {
                    // Reset button state
                    submitBtn.disabled = false;
                    submitBtn.classList.remove('loading');
                    submitBtn.querySelector('.btn-text').style.display = 'inline';
                    submitBtn.querySelector('.btn-loading').style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>