<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Termly Report Card - Fahmid Nursery & Primary School</title>
<link href="https://fonts.googleapis.com/css2?family=Arial:wght@400;600;700&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<style>
:root {
    --color-primary: #2196F3;
    --color-primary-dark: #1976d2;
    --color-gray-600: #757575;
    --color-gray-700: #616161;
    --color-gray-400: #BDBDBD;
    --color-gray-300: #E0E0E0;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: #fff; font-family: Arial, sans-serif; font-size: 9pt; line-height: 1.3; color: #000; }
.report-card-container { max-width: 210mm; margin: 8mm auto; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
.report-page { padding: 8mm 10mm; background: white; }

/* HEADER */
.report-header { text-align: center; border: 1px solid #000; padding: 4mm; margin-bottom: 3mm; background: #fff; }
.school-logo { width: 65px; height: 65px; margin: 0 auto 3mm; border-radius: 50%; overflow: hidden; border: 2px solid var(--color-primary-dark); display: flex; align-items: center; justify-content: center; }
.school-logo img { width: 100%; height: 100%; object-fit: contain; }
.report-header h1 { font-size: 15pt; color: #006400; margin: 0 0 1mm; font-weight: bold; text-transform: uppercase; }
.report-header .subtitle { font-size: 8.5pt; color: #000; margin: 0 0 2mm; font-style: italic; }
.school-info { font-size: 8pt; margin: 2mm 0; line-height: 1.4; }
.report-header .report-title { font-size: 11pt; font-weight: bold; color: #000; margin: 2mm 0 0; text-transform: uppercase; }

/* TERM SELECT */
.form-group { text-align: center; margin: 3mm 0; padding: 2mm; background: #f5f5f5; border: 1px solid #ddd; }
.form-group label { font-weight: bold; font-size: 9.5pt; margin-right: 8px; }
.form-group select { padding: 3px 12px; font-size: 9pt; border: 1px solid #999; border-radius: 3px; }

/* BIO SECTION */
.bio-section { border: 1px solid #000; margin-bottom: 3mm; }
.bio-grid { display: grid; grid-template-columns: 1fr 1fr; font-size: 9pt; }
.bio-item { padding: 1.5mm 3mm; border-bottom: 1px solid #000; border-right: 1px solid #000; display: flex; align-items: center; }
.bio-item:nth-child(2n) { border-right: none; }
.bio-item:nth-last-child(-n+2) { border-bottom: none; }
.bio-label { font-weight: bold; min-width: 100px; color: #000; }
.bio-value { flex: 1; color: #000; }

/* ATTENDANCE SECTION */
.attendance-section { border: 1px solid #000; margin-bottom: 3mm; }
.section-title { background: var(--color-primary); color: white; padding: 1.5mm 3mm; font-weight: bold; font-size: 9.5pt; margin: 0; text-align: center; }
.attendance-grid { display: grid; grid-template-columns: repeat(3, 1fr); font-size: 9pt; }
.attendance-item { padding: 2mm; border-right: 1px solid #000; text-align: center; }
.attendance-item:last-child { border-right: none; }
.attendance-label { font-size: 8.5pt; color: #000; margin-bottom: 1mm; font-weight: 600; }
.attendance-value { font-weight: bold; font-size: 12pt; color: var(--color-primary); }

/* ACADEMIC TABLE */
.academic-section { border: 1px solid #000; margin-bottom: 3mm; }
.academic-table { width: 100%; border-collapse: collapse; font-size: 9pt; }
.academic-table th { background: var(--color-primary); color: white; padding: 1.5mm; text-align: center; font-weight: bold; border: 1px solid #000; font-size: 8.5pt; }
.academic-table td { padding: 1.5mm 2mm; border: 1px solid #000; text-align: center; }
.academic-table td:first-child { text-align: left; font-weight: 600; padding-left: 3mm; }
.summary-row { background: #f0f0f0; font-weight: bold; }
.summary-row td { padding: 2mm; }
.grade-A1 { color: #2e7d32; font-weight: bold; }
.grade-B2, .grade-B3 { color: #1976d2; font-weight: bold; }
.grade-C4, .grade-C5, .grade-C6 { color: #f57c00; font-weight: bold; }
.grade-D7, .grade-D8 { color: #d32f2f; font-weight: bold; }
.grade-F9 { color: #c62828; font-weight: bold; }

/* TRAITS AND PSYCHOMOTOR */
.traits-section, .psychomotor-section { border: 1px solid #000; margin-bottom: 3mm; }
.traits-grid { display: grid; grid-template-columns: repeat(3, 1fr); font-size: 8.5pt; }
.trait-item { display: grid; grid-template-columns: 2fr 1fr; padding: 1.5mm 2.5mm; border-bottom: 1px solid #ddd; border-right: 1px solid #ddd; align-items: center; }
.trait-item:nth-child(3n) { border-right: none; }
.trait-item:nth-last-child(-n+3) { border-bottom: none; }
.trait-item:last-child { border-bottom: none; }
.trait-label { font-weight: 600; color: #000; }
.trait-value { text-align: center; font-weight: bold; color: var(--color-primary); }

/* REMARKS SECTION */
.remarks-section { border: 1px solid #000; margin-bottom: 3mm; }
.remark-box { padding: 2mm 3mm; border-bottom: 1px solid #ddd; font-size: 9pt; }
.remark-box:last-child { border-bottom: none; }
.remark-label { font-weight: bold; color: #000; margin-bottom: 1mm; display: block; }
.remark-text { min-height: 10mm; color: #000; line-height: 1.4; }
.signature-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 4mm; margin-top: 3mm; }
.signature-box { text-align: center; }
.signature-line { border-top: 1px solid #000; margin-top: 8mm; padding-top: 1.5mm; font-size: 8pt; font-weight: 600; }

/* PRINT ACTIONS */
.print-actions { text-align: center; margin: 5mm 0; padding: 4mm; background: #f5f5f5; }
.btn { display: inline-block; padding: 6px 16px; margin: 0 4px; background: var(--color-primary); color: white; text-decoration: none; border: none; border-radius: 3px; font-size: 9pt; cursor: pointer; font-weight: 600; }
.btn:hover { background: var(--color-primary-dark); }

/* PRINT MEDIA */
@media print {
    body, .report-card-container { 
        margin: 0; 
        padding: 0; 
        background: white; 
        box-shadow: none; 
    }
    
    .report-page { 
        padding: 10mm 12mm; 
    }
    
    .print-actions, .no-print { 
        display: none !important; 
    }
    
    .report-header, .section-title, .academic-table th { 
        -webkit-print-color-adjust: exact; 
        print-color-adjust: exact; 
    }
    
    /* Prevent sections from splitting across pages */
    .bio-section, 
    .attendance-section, 
    .academic-section, 
    .traits-section, 
    .psychomotor-section, 
    .remarks-section { 
        page-break-inside: avoid;
        page-break-after: auto;
    }
    
    /* Allow long academic tables to break if necessary */
    .academic-table tbody {
        page-break-inside: auto;
    }
    
    .academic-table tr {
        page-break-inside: avoid;
        page-break-after: auto;
    }
    
    /* Keep summary rows with the last subject */
    .summary-row {
        page-break-before: avoid;
    }
    
    @page { 
        size: A4 portrait; 
        margin: 10mm 12mm; 
    }
}
</style>
</head>
<body>
<div class="report-card-container">
    <div class="print-actions no-print">
        <button class="btn" onclick="window.print()">üñ®Ô∏è Print Report Card</button>
        <a href="pupil.html" class="btn" style="background: var(--color-gray-600);">‚Üê Back to Portal</a>
    </div>

    <div class="report-page">
        <div class="report-header">
            <div class="school-logo">
                <img src="IMG_4629.png" alt="Fahmid Nursery & Primary School Logo">
            </div>
            <h1>FAHMID NURSERY & PRIMARY SCHOOL</h1>
            <div class="subtitle">Academic Excellence; Our Duty, Our Right.</div>
            <div class="school-info">
                18 Shittu Street, Adura Bus Stop, Lagos. | Phone: +2348061427297<br>
                Email: fahmidschool@gmail.com
            </div>
            <div class="report-title" id="report-title">Termly Report Card</div>
        </div>

        <div class="form-group">
            <label for="print-term">Select Term:</label>
            <select id="print-term">
                <option value="First Term">First Term</option>
                <option value="Second Term">Second Term</option>
                <option value="Third Term">Third Term</option>
            </select>
        </div>

        <!-- BIO SECTION -->
        <div class="bio-section">
            <div class="bio-grid">
                <div class="bio-item"><span class="bio-label">Student Name:</span> <span class="bio-value" id="student-name">Loading...</span></div>
                <div class="bio-item"><span class="bio-label">Admission No:</span> <span class="bio-value" id="admission-no">-</span></div>
                <div class="bio-item"><span class="bio-label">Class:</span> <span class="bio-value" id="student-class">Loading...</span></div>
                <div class="bio-item"><span class="bio-label">Gender:</span> <span class="bio-value" id="student-gender">-</span></div>
                <div class="bio-item"><span class="bio-label">Term:</span> <span class="bio-value" id="current-term">Loading...</span></div>
                <div class="bio-item"><span class="bio-label">Session:</span> <span class="bio-value" id="current-session">2025/2026</span></div>
            </div>
        </div>

        <!-- ATTENDANCE -->
        <div class="attendance-section">
            <div class="section-title">ATTENDANCE RECORD</div>
            <div class="attendance-grid">
                <div class="attendance-item"><div class="attendance-label">Times School Opened</div><div class="attendance-value" id="times-opened">-</div></div>
                <div class="attendance-item"><div class="attendance-label">Times Present</div><div class="attendance-value" id="times-present">-</div></div>
                <div class="attendance-item"><div class="attendance-label">Times Absent</div><div class="attendance-value" id="times-absent">-</div></div>
            </div>
        </div>

        <!-- ACADEMIC PERFORMANCE -->
        <div class="academic-section">
            <div class="section-title">ACADEMIC PERFORMANCE</div>
            <table class="academic-table">
                <thead>
                    <tr>
                        <th>SUBJECT</th>
                        <th>CA (40)</th>
                        <th>EXAM (60)</th>
                        <th>TOTAL (100)</th>
                        <th>GRADE</th>
                        <th>REMARK</th>
                    </tr>
                </thead>
                <tbody id="academic-tbody">
                    <tr><td colspan="6" style="text-align:center; padding: 5mm;">Loading results...</td></tr>
                </tbody>
            </table>
        </div>
            <!-- Grading Key -->
            <div class="grading-key">
                <div class="grading-key-title">GRADING SYSTEM:</div>
                <div class="grading-key-grid">
                    <div class="grading-key-item">A1 (75-100%) Excellent</div>
                    <div class="grading-key-item">B2 (70-74%) Very Good</div>
                    <div class="grading-key-item">B3 (65-69%) Good</div>
                    <div class="grading-key-item">C4 (60-64%) Credit</div>
                    <div class="grading-key-item">C5 (55-59%) Credit</div>
                    <div class="grading-key-item">C6 (50-54%) Credit</div>
                    <div class="grading-key-item">D7 (45-49%) Pass</div>
                    <div class="grading-key-item">D8 (40-44%) Pass</div>
                    <div class="grading-key-item">F9 (0-39%) Fail</div>
                </div>
            </div>

            <!-- Behavioral/Affective Traits -->
            <div class="traits-section">
                <div class="section-title">BEHAVIORAL & AFFECTIVE TRAITS</div>
                <div class="traits-grid">
                    <div class="trait-item">
                        <span class="trait-label">Punctuality:</span>
                        <span class="trait-value" id="trait-punctuality">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Neatness:</span>
                        <span class="trait-value" id="trait-neatness">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Politeness:</span>
                        <span class="trait-value" id="trait-politeness">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Honesty:</span>
                        <span class="trait-value" id="trait-honesty">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Obedience:</span>
                        <span class="trait-value" id="trait-obedience">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Cooperation:</span>
                        <span class="trait-value" id="trait-cooperation">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Attentiveness:</span>
                        <span class="trait-value" id="trait-attentiveness">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Leadership:</span>
                        <span class="trait-value" id="trait-leadership">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Self Control:</span>
                        <span class="trait-value" id="trait-selfcontrol">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Creativity:</span>
                        <span class="trait-value" id="trait-creativity">-</span>
                    </div>
                </div>
            </div>

            <!-- Psychomotor Skills -->
            <div class="psychomotor-section">
                <div class="section-title">PSYCHOMOTOR SKILLS</div>
                <div class="traits-grid">
                    <div class="trait-item">
                        <span class="trait-label">Handwriting:</span>
                        <span class="trait-value" id="skill-handwriting">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Drawing:</span>
                        <span class="trait-value" id="skill-drawing">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Sports:</span>
                        <span class="trait-value" id="skill-sports">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Craft Work:</span>
                        <span class="trait-value" id="skill-craft">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Verbal Fluency:</span>
                        <span class="trait-value" id="skill-verbal">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Coordination:</span>
                        <span class="trait-value" id="skill-coordination">-</span>
                    </div>
                </div>
            </div>

            <!-- Remarks and Signatures -->
            <div class="remarks-section">
                <div class="section-title">REMARKS</div>
                <div class="remark-box">
                    <span class="remark-label">Class Teacher's Remark:</span>
                    <div class="remark-text" id="teacher-remark">-</div>
                </div>
                <div class="remark-box">
                    <span class="remark-label">Head Teacher's Remark:</span>
                    <div class="remark-text" id="head-remark">-</div>
                </div>
                <div class="remark-box">
                    <div class="signature-grid">
                        <div class="signature-box">
                            <div class="signature-line">
                                Class Teacher's Signature & Date
                            </div>
                        </div>
                        <div class="signature-box">
                            <div class="signature-line">
                                Head Teacher's Signature & Date
                            </div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 4mm; font-weight: bold; font-size: 9pt;">
                        <span style="margin-right: 6mm;">Resumption Date:</span>
                        <span id="resumption-date">-</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast-container" aria-live="polite" aria-atomic="true"></div>

    <script src="firebase-init.js"></script>
    <script src="script.js"></script>
    <script src="print-results.js"></script>
</body>
</html>