<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Termly Report Card - Fahmid Nursery & Primary School</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <style>
        /* Report Card Specific Styles - Optimized for Single-Page Print */
       body {
    background: #f5f5f5;
    font-family: 'Open Sans', Arial, sans-serif;
    font-size: 8.5pt;
    line-height: 1.25;
    color: #000;
}

.report-card-container {
    max-width: 210mm;
    margin: 8mm auto;
    padding: 0;
    background: white;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

.report-page {
    padding: 6mm;
    background: white;
}

/* Header */
.report-header {
    text-align: center;
    border: 2px solid #000;
    padding: 3mm 3mm 4mm;
    margin-bottom: 3mm;
    background: linear-gradient(to bottom, #f8f9fa 0%, #ffffff 100%);
}

.school-logo {
    width: 70px;
    height: 70px;
    margin: 0 auto 3mm;
    border-radius: 50%;
    overflow: hidden;
    border: 3px solid var(--color-primary-dark, #1976d2);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    background: white;
    display: flex;
    align-items: center;
    justify-content: center;
}

.school-logo img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 50%;
}

.report-header h1 {
    font-size: 14pt;
    color: var(--color-primary-dark, #1976d2);
    margin: 0 0 1mm;
    font-weight: bold;
}

.report-header .subtitle {
    font-size: 8pt;
    color: var(--color-gray-600);
    margin: 0 0 1mm;
}

.school-info {
    font-size: 8pt;
    color: var(--color-gray-700);
    margin: 2mm 0 3mm;
    line-height: 1.3;
}

.report-header .report-title {
    font-size: 10pt;
    font-weight: bold;
    color: #000;
    margin: 0;
    text-transform: uppercase;
}

/* Bio Data */
.bio-section {
    border: 1px solid #000;
    margin-bottom: 3mm;
}

.bio-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    font-size: 8pt;
}

.bio-item {
    padding: 1mm 2mm;
    border-bottom: 1px solid var(--color-gray-400);
    border-right: 1px solid var(--color-gray-400);
    display: flex;
}

.bio-item:nth-child(2n) { border-right: none; }
.bio-item:nth-last-child(-n+2) { border-bottom: none; }

.bio-label {
    font-weight: bold;
    min-width: 80px;
    color: var(--color-gray-700);
}

.bio-value {
    flex: 1;
    color: #000;
}

/* Attendance */
.attendance-section {
    border: 1px solid #000;
    margin-bottom: 3mm;
}

.section-title {
    background: var(--color-primary, #2196F3);
    color: white;
    padding: 0.8mm 2mm;
    font-weight: bold;
    font-size: 9pt;
    margin: 0;
}

.attendance-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    font-size: 8pt;
}

.attendance-item {
    padding: 0.8mm;
    border-right: 1px solid var(--color-gray-400);
    text-align: center;
}

.attendance-item:last-child { border-right: none; }

.attendance-label {
    font-size: 7pt;
    color: var(--color-gray-600);
    margin-bottom: 0.3mm;
}

.attendance-value {
    font-weight: bold;
    font-size: 10pt;
    color: var(--color-primary, #2196F3);
}

/* Academic Table */
.academic-section {
    border: 1px solid #000;
    margin-bottom: 3mm;
}

.academic-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 8pt;
    table-layout: fixed;
}

.academic-table th {
    background: var(--color-primary, #2196F3);
    color: white;
    padding: 0.8mm;
    text-align: center;
    font-weight: bold;
    border: 1px solid #000;
    font-size: 7pt;
    word-wrap: break-word;
}

.academic-table td {
    padding: 0.8mm;
    border: 1px solid var(--color-gray-400);
    text-align: center;
    word-wrap: break-word;
}

.academic-table td:first-child {
    text-align: left;
    font-weight: bold;
}

.summary-row {
    background: #f5f5f5;
    font-weight: bold;
}

/* Grade Colors */
.grade-A1 { color: #2e7d32; font-weight: bold; }
.grade-B2, .grade-B3 { color: #1976d2; font-weight: bold; }
.grade-C4, .grade-C5, .grade-C6 { color: #f57c00; font-weight: bold; }
.grade-D7, .grade-D8 { color: #d32f2f; font-weight: bold; }
.grade-F9 { color: #c62828; font-weight: bold; }

/* Grading Key - 4 columns, expands naturally with more items */
.grading-key {
    border: 1px solid var(--color-gray-300);
    padding: 1mm;
    font-size: 7pt;
    margin-bottom: 3mm;
    border-radius: 6px;
    background: #f9f9f9;
}

.grading-key-title {
    font-weight: bold;
    margin-bottom: 0.5mm;
    color: #000;
}

.grading-key-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.5mm;
}

.grading-key-item {
    padding: 0.4mm;
    font-size: 6.5pt;
}

/* Traits & Psychomotor Skills - 3 columns, expands with more than 9 items */
.traits-section,
.psychomotor-section {
    border: 1px solid #000;
    margin-bottom: 3mm;
}

.traits-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    font-size: 7.8pt;
    gap: 0;
}

.trait-item {
    display: grid;
    grid-template-columns: 2fr 1fr;
    padding: 0.8mm 1.5mm;
    border-bottom: 1px solid var(--color-gray-400);
    border-right: 1px solid var(--color-gray-400);
}

.trait-item:nth-child(3n) { border-right: none; }
.trait-item:nth-last-child(-n+3) { border-bottom: none; }

.trait-label {
    font-weight: bold;
    color: var(--color-gray-700);
}

.trait-value {
    text-align: center;
    font-weight: bold;
    color: var(--color-primary, #2196F3);
}

/* Remarks */
.remarks-section {
    border: 1px solid #000;
    margin-bottom: 3mm;
}

.remark-box {
    padding: 1mm 2mm;
    border-bottom: 1px solid var(--color-gray-400);
    font-size: 8pt;
}

.remark-box:last-child { border-bottom: none; }

.remark-label {
    font-weight: bold;
    color: #000;
    margin-bottom: 0.5mm;
    display: block;
}

.remark-text {
    min-height: 8mm;
    color: var(--color-gray-700);
    line-height: 1.25;
}

.signature-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3mm;
    margin-top: 2mm;
}

.signature-box {
    text-align: center;
}

.signature-line {
    border-top: 1px solid #000;
    margin-top: 4mm;
    padding-top: 1mm;
    font-size: 7pt;
}

.print-actions {
    text-align: center;
    margin: 5mm 0;
    padding: 5mm;
    background: #f0f0f0;
}

/* Print Optimizations */
@media print {
    body {
        background: white;
        margin: 0;
        padding: 0;
    }

    .report-card-container {
        max-width: 100%;
        margin: 0;
        box-shadow: none;
    }

    .report-page {
        padding: 8mm 10mm;
    }

    .print-actions, .no-print {
        display: none !important;
    }

    .report-header {
        background: white !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    .section-title,
    .academic-table th {
        background: #2196F3 !important;
        color: white !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    .school-logo {
        border: 3px solid #000 !important;
        background: white !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    .school-logo img {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    .bio-section,
    .attendance-section,
    .academic-section,
    .grading-key,
    .traits-section,
    .psychomotor-section,
    .remarks-section {
        page-break-inside: avoid;
    }

    table {
        page-break-inside: avoid;
    }

    @page {
        size: A4 portrait;
        margin: 10mm 12mm;
    }
}

@media (max-width: 768px) {
    .report-card-container { margin: 0; }
    .report-page { padding: 5mm; }
    .bio-grid, .traits-grid { grid-template-columns: 1fr; }
    .attendance-grid { grid-template-columns: 1fr; }
    .signature-grid { grid-template-columns: 1fr; }
    .grading-key-grid { grid-template-columns: 1fr; }
}
    </style>
</head>
<body>
    <div class="report-card-container">
        <!-- Print Actions -->
        <div class="print-actions no-print">
            <button class="btn" onclick="window.print()">
                üñ®Ô∏è Print Report Card
            </button>
            <a href="pupil.html" class="btn" style="background: var(--color-gray-600);">
                ‚Üê Back to Portal
            </a>
        </div>

        <!-- Report Card Page -->
        <div class="report-page">
            <!-- Header -->
<div class="report-header">
    <div class="school-logo">
        <img src="IMG_4629.png" alt="Fahmid Nursery & Primary School Logo" style="width: 100%; height: 100%; object-fit: contain; border-radius: 50%;">
    </div>
    <h1>FAHMID NURSERY & PRIMARY SCHOOL</h1>
    <div class="subtitle">Academic Excellence; Our Duty, Our Right.</div>
    
    <!-- NEW: School Address and Contact -->
    <div class="school-info" style="font-size: 8pt; color: var(--color-gray-600); margin: 1mm 0 2mm;">
        18 Shittu Street, Adura Bus Stop, Lagos. | Phone: +2348061427297 | Email: fahmidschool@gmail.com
    </div>
    
    <div class="report-title" id="report-title">Termly Report Card</div>
</div>

<div class="form-group" style="text-align:center; margin: var(--space-lg) 0;">
    <label for="print-term" style="font-weight:bold; font-size: var(--text-lg);">Select Term:</label>
    <select id="print-term" style="margin-left:10px; padding: var(--space-2); font-size: var(--text-base);">
        <option value="First Term">First Term</option>
        <option value="Second Term">Second Term</option>
        <option value="Third Term">Third Term</option>
    </select>
</div>
            <!-- Student Bio Data -->
            <div class="bio-section">
                <div class="bio-grid">
                    <div class="bio-item">
                        <span class="bio-label">Student Name:</span>
                        <span class="bio-value" id="student-name">Loading...</span>
                    </div>
                    <div class="bio-item">
                        <span class="bio-label">Admission No:</span>
                        <span class="bio-value" id="admission-no">-</span>
                    </div>
                    <div class="bio-item">
                        <span class="bio-label">Class:</span>
                        <span class="bio-value" id="student-class">Loading...</span>
                    </div>
                    <div class="bio-item">
                        <span class="bio-label">Gender:</span>
                        <span class="bio-value" id="student-gender">-</span>
                    </div>
                    <div class="bio-item">
                        <span class="bio-label">Term:</span>
                        <span class="bio-value" id="current-term">Loading...</span>
                    </div>
                    <div class="bio-item">
                       <span class="bio-label">Session:</span>
                       <span class="bio-value" id="current-session">2025/2026</span>
                      </div>
                </div>
            </div>

            <!-- Attendance Record -->
            <div class="attendance-section">
                <div class="section-title">ATTENDANCE RECORD</div>
                <div class="attendance-grid">
                    <div class="attendance-item">
                        <div class="attendance-label">Times School Opened</div>
                        <div class="attendance-value" id="times-opened">-</div>
                    </div>
                    <div class="attendance-item">
                        <div class="attendance-label">Times Present</div>
                        <div class="attendance-value" id="times-present">-</div>
                    </div>
                    <div class="attendance-item">
                        <div class="attendance-label">Times Absent</div>
                        <div class="attendance-value" id="times-absent">-</div>
                    </div>
                </div>
            </div>

            <!-- Academic Performance -->
            <div class="academic-section">
                <div class="section-title">ACADEMIC PERFORMANCE</div>
                <table class="academic-table">
                    <thead>
                        <tr>
                            <th>SUBJECT</th>
                            <th>CA<br>(40)</th>
                            <th>EXAM<br>(60)</th>
                            <th>TOTAL<br>(100)</th>
                            <th>GRADE</th>
                            <th>REMARK</th>
                        </tr>
                    </thead>
                    <tbody id="academic-tbody">
                        <tr>
                            <td colspan="6" style="text-align:center; padding: 5mm;">Loading results...</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Grading Key -->
            <div class="grading-key">
                <div class="grading-key-title">GRADING SYSTEM:</div>
                <div class="grading-key-grid">
                    <div class="grading-key-item">A1 (75-100%) Excellent</div>
                    <div class="grading-key-item">B2 (70-74%) Very Good</div>
                    <div class="grading-key-item">B3 (65-69%) Good</div>
                    <div class="grading-key-item">C4 (60-64%) Credit</div>
                    <div class="grading-key-item">C5 (55-59%) Credit</div>
                    <div class="grading-key-item">C6 (50-54%) Credit</div>
                    <div class="grading-key-item">D7 (45-49%) Pass</div>
                    <div class="grading-key-item">D8 (40-44%) Pass</div>
                    <div class="grading-key-item">F9 (0-39%) Fail</div>
                </div>
            </div>

            <!-- Behavioral/Affective Traits -->
            <div class="traits-section">
                <div class="section-title">BEHAVIORAL & AFFECTIVE TRAITS</div>
                <div class="traits-grid">
                    <div class="trait-item">
                        <span class="trait-label">Punctuality:</span>
                        <span class="trait-value" id="trait-punctuality">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Neatness:</span>
                        <span class="trait-value" id="trait-neatness">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Politeness:</span>
                        <span class="trait-value" id="trait-politeness">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Honesty:</span>
                        <span class="trait-value" id="trait-honesty">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Obedience:</span>
                        <span class="trait-value" id="trait-obedience">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Cooperation:</span>
                        <span class="trait-value" id="trait-cooperation">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Attentiveness:</span>
                        <span class="trait-value" id="trait-attentiveness">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Leadership:</span>
                        <span class="trait-value" id="trait-leadership">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Self Control:</span>
                        <span class="trait-value" id="trait-selfcontrol">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Creativity:</span>
                        <span class="trait-value" id="trait-creativity">-</span>
                    </div>
                </div>
            </div>

            <!-- Psychomotor Skills -->
            <div class="psychomotor-section">
                <div class="section-title">PSYCHOMOTOR SKILLS</div>
                <div class="traits-grid">
                    <div class="trait-item">
                        <span class="trait-label">Handwriting:</span>
                        <span class="trait-value" id="skill-handwriting">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Drawing:</span>
                        <span class="trait-value" id="skill-drawing">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Sports:</span>
                        <span class="trait-value" id="skill-sports">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Craft Work:</span>
                        <span class="trait-value" id="skill-craft">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Verbal Fluency:</span>
                        <span class="trait-value" id="skill-verbal">-</span>
                    </div>
                    <div class="trait-item">
                        <span class="trait-label">Coordination:</span>
                        <span class="trait-value" id="skill-coordination">-</span>
                    </div>
                </div>
            </div>

            <!-- Remarks and Signatures -->
            <div class="remarks-section">
                <div class="section-title">REMARKS</div>
                <div class="remark-box">
                    <span class="remark-label">Class Teacher's Remark:</span>
                    <div class="remark-text" id="teacher-remark">-</div>
                </div>
                <div class="remark-box">
                    <span class="remark-label">Head Teacher's Remark:</span>
                    <div class="remark-text" id="head-remark">-</div>
                </div>
                <div class="remark-box">
                    <div class="signature-grid">
                        <div class="signature-box">
                            <div class="signature-line">
                                Class Teacher's Signature & Date
                            </div>
                        </div>
                        <div class="signature-box">
                            <div class="signature-line">
                                Head Teacher's Signature & Date
                            </div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 3mm; font-weight: bold; font-size: 9pt;">
                        <span style="margin-right: 5mm;">Resumption Date:</span>
                        <span id="resumption-date">-</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast-container" aria-live="polite" aria-atomic="true"></div>

    <script src="firebase-init.js"></script>
    <script src="script.js"></script>
    <script src="print-results.js"></script>
</body>
</html>