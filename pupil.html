<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pupil Portal - Fahmid Nursery & Primary School</title>

<link rel="stylesheet" href="styles.css">
<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<style>
body.pupil-portal {
    background: var(--color-white);
    font-family: 'Open Sans', sans-serif;
}

/* ===============================
   HEADER
   =============================== */
.pupil-header {
    background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
    padding: var(--space-8) 0;
    box-shadow: 0 6px 25px rgba(0,0,0,0.12);
    text-align: center;
}

/* CENTERED SCHOOL NAME & PORTAL */
.header-brand {
    display: block;
}
.logo-text {
    font-size: var(--text-3xl);
    font-weight: var(--weight-bold);
    color: var(--color-white);
}
.portal-title {
    font-size: var(--text-lg);
    color: rgba(255,255,255,0.9);
    margin-top: var(--space-2);
}

/* LEFT-ALIGNED INFO BELOW HEADER */
.header-info {
    max-width: 1200px;
    margin: var(--space-4) auto 0 auto;
    text-align: left;
    padding: 0 var(--space-4);
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}
.header-info > * {
    text-align: left; 
}
.welcome-message {
    font-size: var(--text-base);
    color: var(--color-white);
}
.student-meta {
    font-size: var(--text-sm);
    color: rgba(255,255,255,0.85);
}
.btn-logout {
    padding: var(--space-3) var(--space-6);
    border: 2px solid var(--color-white);
    background: transparent;
    color: var(--color-white);
    border-radius: var(--radius-full);
    cursor: pointer;
    width: max-content;
    align-self: flex-start; 
}
.btn-logout:hover {
    background: var(--color-white);
    color: var(--color-primary);
}

/* ===============================
   MAIN CONTENT
   =============================== */
.pupil-main {
    padding: var(--space-16) 0;
    max-width: 1200px;
    margin: auto;
}

/* DASHBOARD CARDS */
.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-8);
    margin-bottom: var(--space-16);
}
.dashboard-card {
    background: var(--color-white);
    padding: var(--space-8);
    border-radius: var(--radius-2xl);
    box-shadow: 0 8px 30px rgba(0,0,0,0.08);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.dashboard-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 16px 45px rgba(0,178,255,0.25);
}
.dashboard-card h3 {
    font-size: var(--text-xl);
    margin-bottom: var(--space-3);
    color: var(--color-gray-900);
}
.dashboard-card p {
    font-size: var(--text-base);
    line-height: 1.6;
    color: var(--color-gray-600);
}

/* RESULTS SECTION */
.results-section {
    background: var(--color-white);
    border-radius: var(--radius-2xl);
    padding: var(--space-12);
    box-shadow: 0 10px 35px rgba(0,0,0,0.1);
    margin-bottom: var(--space-16);
}
.results-header {
    text-align: center;
    margin-bottom: var(--space-12);
}
.results-header h2 {
    font-size: var(--text-3xl);
    margin-bottom: var(--space-4);
    color: var(--color-gray-900);
}
.results-header p {
    font-size: var(--text-base);
    color: var(--color-gray-600);
}

/* RESULTS TABLE */
.results-table-container {
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}
.results-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: var(--space-8);
    font-size: var(--text-sm);
}
.results-table th,
.results-table td {
    padding: var(--space-4);
    text-align: center;
    border-bottom: 1px solid var(--color-gray-200);
}
.results-table th {
    background: var(--color-primary);
    color: var(--color-white);
    text-transform: uppercase;
    font-size: var(--text-xs);
    letter-spacing: 0.05em;
}
.results-table td:first-child,
.results-table th:first-child {
    text-align: left;
}
.summary-row td {
    font-weight: bold;
    background: rgba(0,178,255,0.05);
}

/* ===============================
   PUPIL PROFILE TABLE
   =============================== */
#profile-container {
    margin-bottom: var(--space-12);
}
#profile-container .results-table th {
    background: var(--color-primary);
    color: var(--color-white);
    text-transform: uppercase;
    font-size: var(--text-sm);
    text-align: left;
    padding: var(--space-4);
}
#profile-container .results-table td {
    padding: var(--space-4);
    text-align: left;
    color: var(--color-gray-700);
}
#profile-container .results-table tr:nth-child(even) td {
    background: rgba(0,178,255,0.03);
}
#profile-container .results-table td:first-child {
    font-weight: 600;
}

/* BUTTONS */
.action-buttons {
    display: flex;
    justify-content: center;
    gap: var(--space-4);
    margin-top: var(--space-12);
    flex-wrap: wrap;
}
.btn-primary,
.btn-secondary {
    padding: var(--space-4) var(--space-8);
    border-radius: var(--radius-full);
    font-weight: var(--weight-semibold);
    text-decoration: none;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.btn-primary {
    background: var(--color-primary);
    color: var(--color-white);
    box-shadow: 0 6px 20px rgba(0,178,255,0.3);
}
.btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(0,178,255,0.4);
}
.btn-secondary {
    border: 2px solid var(--color-primary);
    color: var(--color-primary);
    background: transparent;
}
.btn-secondary:hover {
    background: var(--color-primary);
    color: var(--color-white);
}

/* FOOTER */
.pupil-footer {
    background: var(--color-gray-900);
    padding: var(--space-8) 0;
    text-align: center;
    color: var(--color-white);
    font-size: var(--text-sm);
}

/* RESPONSIVE */
@media (max-width: 768px) {
    .header-info {
        text-align: center;
        padding: 0 var(--space-4);
    }
    .btn-logout {
        align-self: center;
    }
    #profile-container .results-table td,
    #profile-container .results-table th {
        font-size: var(--text-xs);
        padding: var(--space-3);
    }
}
</style>
</head>

<body class="pupil-portal">

<header class="pupil-header">
    <!-- CENTERED SCHOOL NAME & PORTAL -->
    <div class="header-brand">
        <div class="logo-text">Fahmid Nursery & Primary School</div>
        <div class="portal-title">Pupil Portal</div>
    </div>

    <!-- LEFT-ALIGNED INFO BELOW HEADER -->
    <div class="header-info">
        <div id="pupil-welcome" class="welcome-message">Welcome back</div>
        <div class="student-meta">
            <span id="student-class"></span>
            <span id="student-session"></span>
        </div>
        <button class="btn-logout" onclick="logout()">Logout</button>
    </div>
</header>

<main class="pupil-main container">
   <!-- PUPIL PROFILE INFO -->
<section class="results-section reveal">
    <div class="results-header">
        <h2>Pupil Profile</h2>
        <p>View your personal and academic information below.</p>
    </div>

    <div class="results-table-container" id="profile-container">
        <table class="results-table">
            <tbody>
                <tr>
                    <th>Name</th>
                    <td id="pupil-name-display">Loading...</td>
                </tr>
                <tr>
                    <th>Date of Birth</th>
                    <td id="pupil-dob-display">Loading...</td>
                </tr>
                <tr>
                    <th>Gender</th>
                    <td id="pupil-gender-display">Loading...</td>
                </tr>
                <tr>
                    <th>Contact</th>
                    <td id="pupil-contact-display">Loading...</td>
                </tr>
                <tr>
                    <th>Address</th>
                    <td id="pupil-address-display">Loading...</td>
                </tr>
                <tr>
                    <th>Class</th>
                    <td id="pupil-class-display">Loading...</td>
                </tr>
                <tr>
                    <th>Assigned Teacher</th>
                    <td id="pupil-teacher-display">Loading...</td>
                </tr>
                <tr>
                    <th>Subjects</th>
                    <td id="pupil-subjects-display">Loading...</td>
                </tr>
            </tbody>
        </table>
    </div>
</section>

    <section class="dashboard-grid">
        <div class="dashboard-card reveal delay-1">
            <h3>My Results</h3>
            <p>View your academic performance across all terms and subjects.</p>
        </div>
        <div class="dashboard-card reveal delay-2">
            <h3>Track Progress</h3>
            <p>Monitor improvements and identify areas that need attention.</p>
        </div>
        <div class="dashboard-card reveal delay-3">
            <h3>Achievements</h3>
            <p>Review milestones and personal academic highlights.</p>
        </div>
    </section>

    <section class="results-section reveal">
        <div class="results-header">
            <h2>Academic Results</h2>
            <p>Your performance record for the current academic session.</p>
        </div>

        <!-- Dynamic results from Firestore -->
        <div class="results-table-container" id="results-container">
            <!-- pupil.js will populate beautifully styled tables -->
        </div>

        <div class="action-buttons">
            <a href="print-results.html" class="btn-primary">View and Print Report Card</a>
        </div>
    </section>

    <div class="action-buttons reveal">
        <a href="index.html" class="btn-secondary">Back to School Website</a>
    </div>
</main>

<footer class="pupil-footer">
    <p>&copy; 2026 Fahmid Nursery and Primary School. All rights reserved.</p>
</footer>

<script src="firebase-init.js"></script>
<script src="script.js"></script>
<script src="pupil.js"></script>

</body>
</html>